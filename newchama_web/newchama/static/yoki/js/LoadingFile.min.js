var newLoadingFile=function(b,d){
	var a={
			d:document,
			nau:navigator.userAgent,
			getId:function(e){	
				return this.d.getElementById(e)
			},
			newElem:function(e){
				return this.d.createElement(e)
			},
			addEvent:function(f,e,h,g){
				if(f.addEventListener){
					f.addEventListener(e,h,g)
				}else{
					if(f.attachEvent){f.attachEvent("on"+e,h)}
				}
			},
			delEvent:function(f,e,h,g){
				if(f.removeEventListener){
					f.removeEventListener(e,h,g)
				}else{
					if(f.detachEvent){f.detachEvent("on"+e,h)}
				}
			}
		},
		c={
			allElem:a.d.createDocumentFragment(),
			head:a.d.getElementsByTagName("head")[0],
			obj:b,len:null,counter:0,
			isAndrweb:/android/i.test(a.nau)&&/applewebkit\/?[1-5]{1}[1-3]{1}[1-4]{1}/i.test(a.nau),
			isBro:/firefox|Webkit/i.test(a.nau),
			isIE:/MSIE/i.test(a.nau),
			ltIE9:/MSIE 6|MSIE 7|MSIE 8/i.test(a.nau)};
			c.len=c.obj.files.length;
		
			a.loadFiles=function(f){
				var e={
					extension:f.split(".").pop(),
					box:a.newElem("div"),
					index:c.obj.files[c.counter++],
					chage:function(g){
						//if(a.canvas){a.draw(parseInt(g)/100)}else{c.progbar.style.width=g+"%"}
						if(c.numerical){c.numerical.innerHTML=g+"%"}
							if(g==100){
								if(d){d()}
							}
					}
				};
				e.file=(e.extension.match(/jpg|gif|jpeg|png|bmp/i)!=null)?a.newElem("img"):(e.extension=="js")?a.newElem("script"):(e.extension=="css")?a.newElem("link"):0;
				if(e.file){
					if(e.file.readyState){
						e.file.onreadystatechange=function(){
							if(e.file.readyState=="loaded"||e.file.readyState=="complete"){
								e.file.onreadystatechange=null;
								e.chage(e.index.pert);
								a.autoLoad()
							}
						}
					}else{
						e.file.onload=function(){
							e.chage(e.index.pert);
							a.autoLoad()
						}
					}
					e.file.onerror=function(){
						e.file.onerror=null;
						if(c.silent){
							alert("Ã¦â€“â€¡Ã¤Â»Â¶"+f+"Ã¥Å Â Ã¨Â½Â½Ã¥Ââ€˜Ã§â€Å¸Ã©â€â„¢Ã¨Â¯Â¯Ã¯Â¼??")
						}
							e.chage(e.index.pert);
							a.autoLoad()};
							switch(e.file.nodeName){
								case"IMG":
									
									e.box.className="loadedpic";
									e.box.id=(e.index.id)?e.index.id:"";
									e.file.src=f;
									e.box.appendChild(e.file);
									break;
								case"SCRIPT":
									e.file.src=f;
									e.file.id=(e.index.id)?e.index.id:"";
									c.head.appendChild(e.file);
									break;
								case"LINK":
									e.file.rel="stylesheet";
									e.file.type="text/css";
									e.file.href=f;
									e.file.id=(e.index.id)?e.index.id:"";
									c.head.appendChild(e.file);
									if(c.isAndrweb){
										e.chage(e.index.pert);
										a.autoLoad()
									}
									break;
								default:break
							}
						}else{if(c.silent){
							alert("Ã¦â€“â€¡Ã¤Â»Â¶"+f+"Ã¦Â Â¼Ã¥Â¼ÂÃ¦Å“â€°Ã¨Â¯Â¯Ã¯Â¼??")
						}
						e.chage(e.index.pert);
						a.autoLoad()
					}
				};
				
				a.loadComplete=function(){
					
				//	if(d){d()}
				};
				a.autoLoad=function(){
				
					if(c.counter<c.len){
						a.loadFiles(c.obj.files[c.counter].link)
					}else{
						a.loadComplete()
					}
				};
				a.init=function(){
					
					c.numerical=(c.obj.numerical)?a.getId(c.obj.numerical):null;
					
					a.autoLoad()
				}()
};